{
    "Fn::Join": [
        "",
        [
            "{",
            "  \"IsEnabled\" : true,",
            "  \"EngineConfiguration\" : {",
            "    \"PollInterval\" : \"00:00:05\",",
            "    \"Components\" : [",
            "    {",
            "      \"Id\" : \"EC2ConfigLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CustomLog.CustomLogInputComponent,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"LogDirectoryPath\": \"C:\\\\Program Files\\\\Amazon\\\\Ec2ConfigService\\\\Logs\",",
            "        \"TimestampFormat\": \"yyyy-MM-ddTHH:mm:ss.fffZ:\",",
            "        \"Encoding\": \"ASCII\",",
            "        \"Filter\": \"EC2ConfigLog.txt\",",
            "        \"CultureName\": \"en-US\",",
            "        \"TimeZoneKind\": \"UTC\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CfnInitLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CustomLog.CustomLogInputComponent,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"LogDirectoryPath\": \"C:\\\\cfn\\\\log\",",
            "        \"TimestampFormat\": \"yyyy-MM-dd HH:mm:ss,fff\",",
            "        \"Encoding\": \"ASCII\",",
            "        \"Filter\": \"cfn-init.log\",",
            "        \"CultureName\": \"en-US\",",
            "        \"TimeZoneKind\": \"Local\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CfnInitCmdLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CustomLog.CustomLogInputComponent,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"LogDirectoryPath\": \"C:\\\\cfn\\\\log\",",
            "        \"TimestampFormat\": \"yyyy-MM-dd HH:mm:ss,fff\",",
            "        \"Encoding\": \"ASCII\",",
            "        \"Filter\": \"cfn-init-cmd.log\",",
            "        \"CultureName\": \"en-US\",",
            "        \"TimeZoneKind\": \"Local\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CfnWireLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CustomLog.CustomLogInputComponent,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"LogDirectoryPath\": \"C:\\\\cfn\\\\log\",",
            "        \"TimestampFormat\": \"yyyy-MM-dd HH:mm:ss,fff\",",
            "        \"Encoding\": \"ASCII\",",
            "        \"Filter\": \"cfn-wire.log\",",
            "        \"CultureName\": \"en-US\",",
            "        \"TimeZoneKind\": \"Local\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CloudWatchEC2ConfigLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CloudWatchLogsOutput,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"AccessKey\": \"\",",
            "        \"SecretKey\": \"\",",
            {
                "Fn::Sub": "        \"Region\": \"${AWS::Region}\","
            },
            "        \"LogGroup\": \"", { "Fn::GetAtt": ["LogGroup", "Outputs.Name"] } , "\",",
            "        \"LogStream\": \"{instance_id}/EC2ConfigLog\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CloudWatchCfnInitLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CloudWatchLogsOutput,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"AccessKey\": \"\",",
            "        \"SecretKey\": \"\",",
            {
                "Fn::Sub": "        \"Region\": \"${AWS::Region}\","
            },
            "        \"LogGroup\": \"", { "Fn::GetAtt": ["LogGroup", "Outputs.Name"] } , "\",",
            "        \"LogStream\": \"{instance_id}/CfnInitLog\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CloudWatchCfnInitCmdLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CloudWatchLogsOutput,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"AccessKey\": \"\",",
            "        \"SecretKey\": \"\",",
            {
                "Fn::Sub": "        \"Region\": \"${AWS::Region}\","
            },
            "        \"LogGroup\": \"", { "Fn::GetAtt": ["LogGroup", "Outputs.Name"] } , "\",",
            "        \"LogStream\": \"{instance_id}/CfnInitCmdLog\"",
            "      }",
            "    },",
            "    {",
            "      \"Id\": \"CloudWatchCfnWireLog\",",
            "      \"FullName\": \"AWS.EC2.Windows.CloudWatch.CloudWatchLogsOutput,AWS.EC2.Windows.CloudWatch\",",
            "      \"Parameters\": {",
            "        \"AccessKey\": \"\",",
            "        \"SecretKey\": \"\",",
            {
                "Fn::Sub": "        \"Region\": \"${AWS::Region}\","
            },
            "        \"LogGroup\": \"", { "Fn::GetAtt": ["LogGroup", "Outputs.Name"] } , "\",",
            "        \"LogStream\": \"{instance_id}/CfnWireLog\"",
            "      }",
            "    }],",
            "    \"Flows\": {",
            "      \"Flows\": [",
            "        \"EC2ConfigLog,CloudWatchEC2ConfigLog\",",
            "        \"CfnInitLog,CloudWatchCfnInitLog\",",
            "        \"CfnInitCmdLog,CloudWatchCfnInitCmdLog\",",
            "        \"CfnWireLog,CloudWatchCfnWireLog\"",
            "      ]",
            "    }",
            "  }",
            "}"
        ]
    ]
}